@model IEnumerable<FitApp.Models.Group>

@{
    ViewBag.Title = "List";
}

<h2>Lista grup</h2>

<p>
    @Html.ActionLink("Stwórz nową", "Create")
    <br />
    @Html.ActionLink("Zwróć listę grup publicznych w postaci JSON","PublicGroups","Group")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.GroupName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.GroupType)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.MembersCount)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        if (HttpContext.Current.User.Identity.Name == "".ToString())
        {
            if (item.GroupType == "Public")
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.GroupName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.GroupType)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.MembersCount)
                    </td>
                    <td>
                        @Html.ActionLink("Zapisz się", "Enrol", new { id = item.Id }, new { @class = "btn btn-primary" })


                    </td>
                </tr>
            }
            else
            {
                @ViewBag.Message
            }
        }
        else
        {
            if (!item.AdminId.Equals(ViewBag.UserId))
            {
                //tu pokombinowac

                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.GroupName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.GroupType)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.MembersCount)
                        </td>
                        <td>
                            @Html.ActionLink("Zapisz się", "Enrol", new { Id = item.Id }, new { @class = "btn btn-primary" })

                        </td>
                    </tr>
                

            }


        }

    }

</table>
